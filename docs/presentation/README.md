---
marp: true
theme: uncover
_class: invert
size: 16:9
header: 'ECOINDEX + WEB PERF ⇒ PLUGIN LIGHTHOUSE'
footer: 'Association Green IT november@2023'
---

# <!-- fit --> ECOINDEX + WEB PERF ⇒ PLUGIN LIGHTHOUSE

> A suite of tools to mesure the environnemetal performance, inside the web development workflow.

---

## What it is?

- a runner/cli that can be used as a standalone tool ;
- a lighthouse plugin that can be used with the lighthouse cli and lighthouse CI with some helpers..

---

- it add ecoindex audits to Lighthouse reports and display GHG and water consumption ;
- it add Green IT Best-practices to lighthouse ;
- it generate a standardized Environmental Impact Statement (EIS) from Green IT® ;
- it implement a workflow to mesure the page as a user.

---

## Features

| Feature                              | cli | CI  |
| :----------------------------------- | --- | --- |
| Lighthouse report w/ ecoindex audits | ✅  | ✅  |
| Green IT Best-practices              | ✅  | ✅  |
| Environmental Impact Statement (EIS) | ✅  | ❌  |
| Send result to Lighthouse server     | ❌  | ✅  |

---

## What's in the box?

- `lighthouse-ecoindex` cli ;
- `lighthouse-plugin-ecoindex` plugin ;
- `.puppeteerrc.js` Puppeteer script to mesure the page as a user ;
- `.lighthouserc.js` Lightouse config to mesure and add the ecoindex audits ;

---

## Human workflow emulated by `Puppeteer`

```txt
1. Launch a headless Chrome browser with
no-sandbox, disable-dev-shm-usage and goog:loggingPrefs capabilities set to {"performance": "ALL"}.
2. Open the page without local data (cache, cookies, localstorage...) at 1920 × 1080px resolution.
3. Wait 3 seconds
4. Scroll to bottom of page
5. Wait another 3 seconds
6. Close page
```

---

<!-- _class: invert -->

## <!-- fit --> `lighthouse-ecoindex` cli

---

<!-- _class: invert -->

### <!-- fit --> `lighthouse-ecoindex collect`

> Run Lighthouse and save the results to a local folder.
> Mesure a course of URLs to get an overview of the environmental impact of a website.

---

<!-- _class: invert -->

## What you can do with

- generate a report
  - for a single URL or a list of URLs ;
  - for a list of URLs from a JSON file ;
- reports are generated in HTML and JSON ;
- generate a standardized Environmental Impact Statement (EIS) from Green IT® ;

---

<!-- _class: invert -->

## `lighthouse-ecoindex` cli

> `npx lighthouse-ecoindex collect --help` options

```txt
Run Lighthouse and save the results to a local folder.

Options:
      --help            Show help                                      [boolean]
      --version         Show version number                            [boolean]
  -d, --demo            Use demo URLs.                [boolean] [default: false]
  -u, --url             URL to process, supports multiple values         [array]
  -j, --json-file       Structured file, must respect a schema (see documentatio
                        n).                                             [string]
  -h, --extra-header    Extra object config for Lighthouse. JSON string or path
                        to a JSON file.                 [string] [default: null]
  -p, --output-path     Output folder.           [string] [default: "./reports"]
  -o, --output          Reporter for the results, supports multiple values. choi
                        ces: "json", "html", "statement". WARN: "csv" is not ava
                        lailable with flow.         [string] [default: ["html"]]
  -a, --audit-category  Audit to run, supports multiple values.
  [array] [default: ["performance","seo","accessibility","best-practices","light
                                                        house-plugin-ecoindex"]]
```

---

<!-- _class: invert -->

## `lighthouse-ecoindex` cli

> `npx lighthouse-ecoindex collect --help` examples

```txt
Examples:
  lighthouse-ecoindex collect --demo        Generates a report for the demo URLs
                                            .
  lighthouse-ecoindex collect --json-file   Generates multiples reports for mult
  ./input-file.json                         iples courses.
  lighthouse-ecoindex collect --url https:  Generates multiples reports for mult
  //ecoindex.fr/                            iples courses.

For more information on this Lighthouse Ecoindex script helper, see https://gith
ub.com/cnumr/lighthouse-plugin-ecoindex#readme
```

---

<!-- _class: invert -->

### <!-- fit --> `lighthouse-ecoindex convert`

> Convert JSON report(s) generated by `lighthouse-ecoindex` to Environmental Statement file.

---

<!-- _class: invert -->

## `lighthouse-ecoindex` cli

> `npx lighthouse-ecoindex convert --help` options

```txt
Convert JSON report(s) generated by `lighthouse-ecoindex` to Environmental State
ment file.

Options:
      --help          Show help                                        [boolean]
      --version       Show version number                              [boolean]
  -i, --input-report  JSON file generate by `lighthouse-ecoindex`.       [array]
  -p, --output-path   Output folder.             [string] [default: "./reports"]
```

---

<!-- _class: invert -->

## `lighthouse-ecoindex` cli

> `npx lighthouse-ecoindex convert --help` examples

```txt
Examples:
  lighthouse-ecoindex convert --input-repo  Convert JSON report(s) generated by
  rt ./lh-export-1.json --input-report ./l  `lighthouse-ecoindex` to Environment
  h-export-2.json                           al Statement file.

For more information on this Lighthouse Ecoindex script helper, see https://gith
ub.com/cnumr/lighthouse-plugin-ecoindex#readme
```

---

<!-- _class: invert -->

## `lighthouse-ecoindex cli` Exports

### Reports

- Multiples HTML & JSON Lighthouse report ;
- A report display the mesure of each courses.

---

<!-- _class: invert -->

## `lighthouse-ecoindex cli` Exports

### Environmental Impact Statement (EIS)

- A JSON standardized Environmental Impact Statement (EIS) file (as sitemap or robots.txt) ;
- HTML and Markdown human readable output, to add easely to your website.

---

## <!-- fit --> `plugin-lighthouse-ecoindex`

- with `lighthouse` cli
- with `lighthouse-ci`

---

## What you can do with

> Use lighthouse-ci with your GitHub Actions (or other CI) to generate a report for each pull request.

- generate a reports as artifacts and display them in the GitHub/GitLab/... UI ;
- send the results to a Lighthouse server.

---

## How to use it?

- Add our `lighthouserc.js` config to your project ;
- Add our `puppeteer.js` script to your project (allready added in our `lighthouserc.js` config).

---

## What you can do with?

- generate a reports as artifacts and display them in the GitHub/GitLab/... UI ;
- send the results to a Lighthouse server.

---

<!-- _class: invert -->

## <!-- fit --> What's next?

> We need your help to make it better!

- [ ] Add localizations ;
- [ ] Add more audits and Best-practices ;
- [ ] Add more documentation and more tests ;
- [ ] Add more ...
